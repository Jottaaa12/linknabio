document.addEventListener('DOMContentLoaded',()=>{particlesJS('particles-js',{"particles":{"number":{"value":80,"density":{"enable":true,"value_area":800}},"color":{"value":"#ffffff"},"shape":{"type":"circle","stroke":{"width":0,"color":"#000000"}},"opacity":{"value":0.5,"random":true,"anim":{"enable":true,"speed":1,"opacity_min":0.1,"sync":false}},"size":{"value":3,"random":true,"anim":{"enable":false}},"line_linked":{"enable":true,"distance":150,"color":"#ffffff","opacity":0.4,"width":1},"move":{"enable":true,"speed":2,"direction":"none","random":false,"straight":false,"out_mode":"out","bounce":false}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"repulse"},"onclick":{"enable":true,"mode":"push"},"resize":true}},"retina_detect":true});const pixKey='+5588981905006';const secondaryPixKey='pix@acaisabordaterra.com.br';const merchantName='Nayara Santos de Araujo';const merchantCity='BARROQUINHA';const qrCanvas=document.getElementById('qr-code');const pixValueInput=document.getElementById('pix-value');const generateQrBtn=document.getElementById('generate-qr');const showSecondaryKeyBtn=document.getElementById('show-secondary-key');const secondaryKeyP=document.getElementById('secondary-key');const copyKeyBtn=document.getElementById('copy-key');const copySecondaryKeyBtn=document.getElementById('copy-secondary-key');function formatField(id,value){const length=value.length.toString().padStart(2,'0');return id+length+value;}function generateBrCode(value=null){const valor=value?parseFloat(value).toFixed(2):'0.00';const payload=[formatField('00','01'),formatField('26',formatField('00','br.gov.bcb.pix')+formatField('01',pixKey)),formatField('52','0000'),formatField('53','986'),formatField('54',valor),formatField('58','BR'),formatField('59',merchantName.substring(0,25)),formatField('60',merchantCity.substring(0,15)),'62070500***'];let payloadString=payload.join('');payloadString+='6304';let crc=0xFFFF;for(let i=0;i<payloadString.length;i++){crc^=(payloadString.charCodeAt(i)&0xFF)<<8;for(let j=0;j<8;j++){crc=(crc&0x8000)?(crc<<1)^0x1021:crc<<1;}}const crc16=(crc&0xFFFF).toString(16).toUpperCase().padStart(4,'0');return payloadString+crc16;}function generateQrCode(brCode){qrCanvas.classList.add('fade-out');setTimeout(()=>{new QRious({element:qrCanvas,value:brCode,size:220,level:'H'});qrCanvas.classList.remove('fade-out');},300);}function copyToClipboard(text,btn){navigator.clipboard.writeText(text).then(()=>{const originalIcon=btn.innerHTML;btn.innerHTML='<i class="fas fa-check"></i>';setTimeout(()=>{btn.innerHTML=originalIcon;},2000);});}generateQrCode(generateBrCode());generateQrBtn.addEventListener('click',()=>{const value=pixValueInput.value;generateQrCode(generateBrCode(value));});showSecondaryKeyBtn.addEventListener('click',()=>{secondaryKeyP.classList.toggle('hidden');});copyKeyBtn.addEventListener('click',()=>copyToClipboard(pixKey,copyKeyBtn));copySecondaryKeyBtn.addEventListener('click',()=>copyToClipboard(secondaryPixKey,copySecondaryKeyBtn));});